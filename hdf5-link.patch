--- hdf5-1.8.6/c++/src/Makefile.am.orig	2011-02-14 17:23:42.000000000 +0100
+++ hdf5-1.8.6/c++/src/Makefile.am	2011-05-03 22:01:04.307748409 +0200
@@ -28,6 +28,7 @@
 lib_LTLIBRARIES=libhdf5_cpp.la
 
 # Add libtool numbers to the HDF5 C++ library (from config/lt_vers.am)
+libhdf5_cpp_la_LIBADD=$(top_builddir)/src/libhdf5.la
 libhdf5_cpp_la_LDFLAGS= -version-info $(LT_VERS_INTERFACE):$(LT_VERS_REVISION):$(LT_VERS_AGE) $(AM_LDFLAGS)
 
 # Shared C++ libraries aren't universally supported.
--- hdf5-1.8.1/hl/src/Makefile.am.orig	2008-05-29 18:39:01.000000000 +0200
+++ hdf5-1.8.1/hl/src/Makefile.am	2008-06-05 00:28:00.446476110 +0200
@@ -27,6 +27,7 @@
 lib_LTLIBRARIES=libhdf5_hl.la
 
 libhdf5_hl_la_SOURCES=H5DS.c H5IM.c H5LT.c H5LTanalyze.c H5LTparse.c H5PT.c H5TB.c
+libhdf5_hl_la_LIBADD=$(top_builddir)/src/libhdf5.la
 
 # Public header files (to be installed)
 include_HEADERS=hdf5_hl.h H5IMpublic.h H5LTpublic.h H5TBpublic.h H5DSpublic.h H5PTpublic.h
--- hdf5-1.8.1/hl/c++/src/Makefile.am.orig	2008-05-29 18:39:01.000000000 +0200
+++ hdf5-1.8.1/hl/c++/src/Makefile.am	2008-06-05 00:29:14.914717299 +0200
@@ -35,6 +35,7 @@
 # Source files for the library
 # At the moment, only the H5PT Packet Table has a C++ API.
 libhdf5_hl_cpp_la_SOURCES=H5PacketTable.cpp
+libhdf5_hl_cpp_la_LIBADD=$(top_builddir)/hl/src/libhdf5_hl.la
 
 # Public headers
 include_HEADERS=H5PacketTable.h
